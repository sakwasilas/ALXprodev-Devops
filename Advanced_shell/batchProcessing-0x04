#!/bin/bash

POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_URL="https://pokeapi.co/api/v2/pokemon"
ERROR_FILE="errors.txt"

fetch_pokemon() {
    local pokemon="$1"
    local OUTPUT_FILE="${pokemon}.json"
    curl -s -o "$OUTPUT_FILE" -w "%{http_code}" "$API_URL/$pokemon" | {
        read status
        if [[ $status -eq 200 ]]; then
            echo "Successfully fetched data for $pokemon."
        else
            echo "Error: Failed to fetch $pokemon with status $status." >> "$ERROR_FILE"
        fi
    }
}

# Fetch data in parallel
for pokemon in "${POKEMONS[@]}"; do
    fetch_pokemon "$pokemon" &
done

# Wait for all background processes to finish
wait
